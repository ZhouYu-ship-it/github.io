<!DOCTYPE html>
<html>

<head>
    <style>
        body {
            font-family: "Comic Sans MS", cursive;
            background: #FFF5E6;
            text-align: center;
            padding: 20px;
        }

        .menu {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px;
            flex-wrap: wrap;
        }

        .food-item {
            width: 120px;
            cursor: pointer;
            transition: transform 0.3s;
            background: white;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .food-item:active {
            transform: scale(0.95);
        }

        .food-img {
            width: 80px;
            height: 80px;
            object-fit: contain;
        }

        .price {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 10px;
        }

        .cart {
            background: white;
            padding: 20px;
            border-radius: 20px;
            width: 80%;
            margin: 20px auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .stats {
            background: #FFFAF0;
            padding: 20px;
            border-radius: 20px;
            margin: 20px auto;
            width: 80%;
        }

        .student-id {
            font-size: 24px;
            color: #4169E1;
            margin: 20px;
        }

        button {
            background: #FFB6C1;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            font-size: 20px;
            cursor: pointer;
            margin: 10px;
        }

        .popular-food {
            animation: glow 1s infinite alternate;
        }

        @keyframes glow {
            from {
                transform: scale(1);
            }

            to {
                transform: scale(1.1);
            }
        }
    </style>
</head>

<body>
    <h1>ğŸª éº¦é¦™åŠå°ç®¡å®¶ ğŸ“Š</h1>
    <!-- æ˜¾ç¤ºå½“å‰å°é¡¾å®¢ç¼–å· -->
    <div class="student-id">ğŸ‘§ å½“å‰å°é¡¾å®¢ï¼š1å·</div>

    <!-- èœå•åŒºåŸŸ -->
    <div class="menu">
        <!-- æ¯ç§é£Ÿç‰©çš„é¡¹ -->
        <div class="food-item" onclick="addItem('flower')">
            <img src="flower.jpg" class="food-img" alt="é²œèŠ±é¥¼">
            <div class="price">ğŸŒŸ</div>
        </div>
        <div class="food-item" onclick="addItem('rainbow')">
            <img src="rainbow.jpg" class="food-img" alt="äº”å½©ç³•å›¢">
            <div class="price">ğŸŒŸğŸŒŸ</div>
        </div>
        <div class="food-item" onclick="addItem('bun')">
            <img src="bun.jpg" class="food-img" alt="å°ç¬¼åŒ…">
            <div class="price">ğŸŒŸğŸŒŸğŸŒŸ</div>
        </div>
    </div>

    <!-- è´­ç‰©è½¦åŒºåŸŸ -->
    <div class="cart">
        <h3>ğŸ›’ å½“å‰è®¢å•</h3>
        <div id="currentOrder"></div>
        <div>ğŸŒŸæ€»æ•°ï¼š<span id="currentStars">0</span></div>
    </div>

    <!-- æ“ä½œæŒ‰é’® -->
    <button onclick="nextStudent()">â¡ï¸ ä¸‹ä¸€ä¸ªå°é¡¾å®¢</button>
    <button onclick="showStats()">ğŸ“Š æŸ¥çœ‹ç»Ÿè®¡</button>

    <!-- ç»Ÿè®¡ä¿¡æ¯åŒºåŸŸï¼Œåˆå§‹éšè— -->
    <div class="stats" id="stats" style="display: none">
        <h3>ğŸ“ˆ æœ€å—æ¬¢è¿ç‚¹å¿ƒ</h3>
        <div id="popularFood"></div>
        <div id="allOrders"></div>
    </div>

    <script>
        // å½“å‰å°é¡¾å®¢ç¼–å·
        let currentStudent = 1;
        // å­˜å‚¨æ¯ä¸ªå°é¡¾å®¢çš„è®¢å•
        const orders = {};
        // å­˜å‚¨æ¯ç§é£Ÿç‰©çš„é”€å”®ç»Ÿè®¡
        const foodStats = { flower: 0, rainbow: 0, bun: 0 };
        // æ¯ç§é£Ÿç‰©å¯¹åº”çš„æ˜Ÿæ˜Ÿæ•°
        const foodStarMap = { flower: 1, rainbow: 2, bun: 3 };

        // æ·»åŠ é£Ÿç‰©åˆ°å½“å‰å°é¡¾å®¢çš„è®¢å•
        function addItem(type) {
            if (!orders[currentStudent]) {
                orders[currentStudent] = [];
            }
            orders[currentStudent].push(type);
            foodStats[type]++;
            updateCart();
        }

        // æ›´æ–°è´­ç‰©è½¦æ˜¾ç¤º
        function updateCart() {
            const current = orders[currentStudent] || [];
            // æ˜¾ç¤ºå½“å‰è®¢å•ä¸­çš„é£Ÿç‰©å›¾ç‰‡
            const orderHtml = current.length ? current.map(type => `<img src="${type}.jpg" style="width:40px; height:40px; margin:5px">`).join('') : 'ç©ºç©ºå¦‚ä¹Ÿï½';
            document.getElementById('currentOrder').innerHTML = orderHtml;

            // è®¡ç®—å½“å‰è®¢å•çš„æ˜Ÿæ˜Ÿæ€»æ•°
            const stars = current.reduce((sum, type) => sum + foodStarMap[type], 0);
            document.getElementById('currentStars').textContent = 'ğŸŒŸ'.repeat(stars);
        }

        // åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå°é¡¾å®¢
        function nextStudent() {
			//æœ€å¤§æ”¯æŒå¤šå°‘ä¸ªé¡¾å®¢ä¸‹å•
            if (currentStudent < 21) {
                currentStudent++;
                document.querySelector('.student-id').textContent = `ğŸ‘¦ å½“å‰å°é¡¾å®¢ï¼š${currentStudent}å·`;
                orders[currentStudent] = [];
                updateCart();
            } else {
                alert('ğŸ‰ æ‰€æœ‰å°é¡¾å®¢éƒ½ç‚¹å®Œå•¦ï¼');
            }
        }

        // æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
        function showStats() {
            // æ‰¾å‡ºæœ€å—æ¬¢è¿çš„é£Ÿç‰©
            const maxCount = Math.max(...Object.values(foodStats));
            const popular = Object.entries(foodStats)
               .filter(([_, count]) => count === maxCount)
               .map(([type]) => type);

            // æ˜¾ç¤ºæœ€å—æ¬¢è¿çš„é£Ÿç‰©
            const popularHtml = popular.map(type => `
                <div class="popular-food">
                    <img src="${type}.jpg" style="width:80px; height:80px">
                    <div>${maxCount}ä»½</div>
                </div>
            `).join('');
            document.getElementById('popularFood').innerHTML = popularHtml;

            // æ˜¾ç¤ºæ‰€æœ‰é£Ÿç‰©çš„é”€å”®ç»Ÿè®¡
            const allOrdersHtml = `
                <h4>æ‰€æœ‰è®¢å•ç»Ÿè®¡ï¼š</h4>
                <div>ğŸŒ¸ é²œèŠ±é¥¼ï¼š${foodStats.flower} ä»½</div>
                <div>ğŸŒˆ äº”å½©ç³•å›¢ï¼š${foodStats.rainbow} ä»½</div>
                <div>ğŸ¥Ÿ å°ç¬¼åŒ…ï¼š${foodStats.bun} ä»½</div>
            `;
            document.getElementById('allOrders').innerHTML = allOrdersHtml;

            // æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯åŒºåŸŸ
            document.getElementById('stats').style.display = 'block';
        }
    </script>
</body>

</html>    